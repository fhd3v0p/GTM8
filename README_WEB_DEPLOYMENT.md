# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Flutter –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è GTM

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Flutter –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ Docker nginx.

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
GTM8/
‚îú‚îÄ‚îÄ lib/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Flutter
‚îú‚îÄ‚îÄ assets/                 # –†–µ—Å—É—Ä—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ web/                    # –ü–∞–ø–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (flutter run)
‚îú‚îÄ‚îÄ build/web/              # Production –±–∏–ª–¥ (flutter build web)
‚îú‚îÄ‚îÄ web_local/              # –°—Ç–∞—Ç–∏–∫–∞ –¥–ª—è nginx —Å–µ—Ä–≤–µ—Ä–∞ ‚≠ê
‚îú‚îÄ‚îÄ nginx.conf              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
‚îú‚îÄ‚îÄ docker-compose-fixed.yml # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ deploy_web_local.sh     # –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è ‚≠ê
```

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. üèóÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ production –±–∏–ª–¥–∞
```bash
flutter build web --release
```
- –°–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∏–ª–¥ –≤ `build/web/`
- –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç JavaScript –∏ CSS
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —à—Ä–∏—Ñ—Ç—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### 2. üì¶ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ web_local
```bash
cp -r build/web/* web_local/
```
- –ö–æ–ø–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–π –±–∏–ª–¥ –≤ –ø–∞–ø–∫—É `web_local/`
- –≠—Ç–∞ –ø–∞–ø–∫–∞ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### 3. üê≥ –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ nginx
```yaml
volumes:
  - ./web_local:/usr/share/nginx/html:ro
```
- nginx –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É –∏–∑ `web_local/`
- –î–æ—Å—Ç—É–ø–Ω–æ –ø–æ https://gtm.baby –∏ http://localhost

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
./deploy_web_local.sh
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
```bash
./deploy_to_server.sh
```

### Watch-—Ä–µ–∂–∏–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ)
```bash
./watch_and_deploy.sh
```

### –†—É—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –±–∏–ª–¥
flutter build web --release

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ web_local
rm -rf web_local/*
cp -r build/web/* web_local/

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å nginx (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker restart gtm_nginx
```

## üîß –†–µ–∂–∏–º—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### üöÄ Production —Ä–µ–∂–∏–º
```bash
./deploy_web_local.sh
```
- **–î–æ—Å—Ç—É–ø**: https://gtm.baby (—á–µ—Ä–µ–∑ nginx)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

### üíª Development —Ä–µ–∂–∏–º  
```bash
flutter run -d chrome --web-port=8087
```
- **–î–æ—Å—Ç—É–ø**: http://localhost:8087
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: Hot reload, debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

## üê≥ Docker –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose -f docker-compose-fixed.yml up -d
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ nginx
```bash
docker restart gtm_nginx
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ nginx
```bash
docker logs gtm_nginx
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose -f docker-compose-fixed.yml down
```

## üåê URL-–∞–¥—Ä–µ—Å–∞

| –†–µ–∂–∏–º | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| Production | https://gtm.baby | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç —á–µ—Ä–µ–∑ nginx |
| Remote Server | http://31.56.39.165 | –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä |
| Local Docker | http://localhost | –õ–æ–∫–∞–ª—å–Ω—ã–π nginx |
| Development | http://localhost:8087 | Flutter dev server |
| API | https://api.gtm.baby | API —Å–µ—Ä–≤–µ—Ä |

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker ps
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ web_local
```bash
ls -la web_local/
```

### –†–∞–∑–º–µ—Ä –±–∏–ª–¥–∞
```bash
du -sh web_local/
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ nginx
```bash
docker logs gtm_nginx -f
```

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./deploy_web_local.sh

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
./deploy_to_server.sh

# –ó–∞–ø—É—Å–∫ Docker
docker-compose -f docker-compose-fixed.yml up -d

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å hot reload
flutter run -d chrome --web-port=8087

# Watch-—Ä–µ–∂–∏–º
./watch_and_deploy.sh

# –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -r web_local/ root@31.56.39.165:/root/gtm8/
```

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. **–ü–∞–ø–∫–∞ web_local** - —ç—Ç–æ —Ç–æ, —á—Ç–æ –≤–∏–¥—è—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–ü–∞–ø–∫–∞ web** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞** –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å `./deploy_web_local.sh`
4. **–î–ª—è hot reload** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `flutter run -d chrome --web-port=8087`
5. **Docker –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω** –¥–ª—è —Ä–∞–±–æ—Ç—ã production —Ä–µ–∂–∏–º–∞